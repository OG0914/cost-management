# 功能：管理员删除所有报价单权限

## 修改日期
2025-11-06

## 功能描述
新增管理员可以删除所有报价单的权限，无论审批与否。

## 权限规则

### 管理员（admin）
- 可以删除任何状态的报价单（草稿、已提交、已审核、已退回）
- 可以删除任何人创建的报价单

### 普通用户（salesperson）
- 只能删除自己创建的报价单
- 只能删除草稿状态的报价单

## 修改文件

### 后端
**文件：** `backend/controllers/costController.js`

**修改内容：**
- 重构 `deleteQuotation` 函数的权限检查逻辑
- 管理员优先判断，直接允许删除任何报价单
- 非管理员需要检查创建者和状态

### 前端
**文件：** `frontend/src/views/cost/CostRecords.vue`

**修改内容：**
- 修改 `canDelete` 函数，增加管理员角色判断
- 导入 `getUser` 函数获取当前用户信息
- 管理员可以看到所有报价单的删除按钮

## 测试建议

1. 使用管理员账号登录，验证可以删除各种状态的报价单
2. 使用普通用户账号登录，验证只能删除自己的草稿状态报价单
3. 验证删除操作的确认提示正常显示
4. 验证删除后列表自动刷新
